---
layout: post
title: "Sau"
description: "Sau is an Easy rated Linux machine on HTB."
categories: [CTF,HTB]
tags: [Linux,Easy]
author: g
---

## Nmap
![Pasted image 20240715100501.png](/images/Pasted image 20240715100501.png){: .normal }

## Foothold
### Website enumeration
Enumerating the website on port 55555 reveals a forward url configuration option, we can use this to check out the content of port 80 (cant be accessed yet since the port is filtered).
![Pasted image 20240715100456.png](/images/Pasted image 20240715100456.png){: .normal width="500" }

Set the forward url to the localhost interface (127.0.0.1).
![Pasted image 20240715100452.png](/images/Pasted image 20240715100452.png){: .normal width="500" }

We can now visit the bucket location.
![Pasted image 20240715100447.png](/images/Pasted image 20240715100447.png){: .normal width="600" }

Mailtrail v0.53 is vulnerable to RCE if we have access to the login page, change forward url to login page.
![Pasted image 20240715100444.png](/images/Pasted image 20240715100444.png){: .normal width="500" }

Now we can run the exploit and setup a nc listener to establish a shell connection.
![Pasted image 20240715100439.png](/images/Pasted image 20240715100439.png){: .normal width="600" }
![Pasted image 20240715100434.png](/images/Pasted image 20240715100434.png){: .normal width="500" }

## PrivEsc
Checking what commands we can run with sudo.
![Pasted image 20240715100430.png](/images/Pasted image 20240715100430.png){: .normal }

In GTFObins we see that we can spawn a shell after entering systemctl as the root user with: `!sh`.
![Pasted image 20240715100425.png](/images/Pasted image 20240715100425.png){: .normal }
![Pasted image 20240715100420.png](/images/Pasted image 20240715100420.png){: .normal }


## User.txt
![Pasted image 20240715100415.png](/images/Pasted image 20240715100415.png){: .normal width="400" }


## Root.txt
![Pasted image 20240715100409.png](/images/Pasted image 20240715100409.png){: .normal width="400" }


## Pwned
![Pasted image 20240715100403.png](/images/Pasted image 20240715100403.png){: .normal }


### Sources
- [Mailtrail RCE](https://github.com/spookier/Maltrail-v0.53-Exploit)
- [PrivEsc](https://gtfobins.github.io/gtfobins/systemctl/)